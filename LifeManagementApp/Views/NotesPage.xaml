<ContentPage
    x:Class="LifeManagementApp.Views.NotesPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Name="NotesPageRoot"
    Title="Notes">

    <Grid RowDefinitions="Auto,*"
          Padding="16"
          RowSpacing="12">

        <VerticalStackLayout Grid.Row="0" Spacing="8">
            <Entry Placeholder="Title"
                   Text="{Binding NewTitle}" />

            <Editor Placeholder="Write your note..."
                    AutoSize="TextChanges"
                    Text="{Binding NewText}" />

            <Button Text="Add note"
                    Command="{Binding AddNoteCommand}" />
        </VerticalStackLayout>

        <CollectionView Grid.Row="1"
                ItemsSource="{Binding Notes}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="8"
                   Margin="0,4"
                   HasShadow="True">
                        <VerticalStackLayout>
                            <Label Text="{Binding Title}"
                           FontAttributes="Bold" />
                            <Label Text="{Binding Text}" />
                            <Label Text="{Binding CreatedAt, StringFormat='{}{0:G}'}"
                           FontSize="12"
                           TextColor="Gray" />

                            <!-- DELETE-NAPPI -->
                            <Button Text="Delete"
                            Command="{Binding Source={x:Reference NotesPageRoot},
                                              Path=BindingContext.DeleteNoteCommand}"
                            CommandParameter="{Binding .}" />
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </Grid>
</ContentPage>
